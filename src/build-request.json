{
  "kind": "build_request",
  "title": "Add full date/time editing to journey edit modal",
  "projectName": "Globe Travel",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Replace read-only date displays in the journey edit modal with interactive calendar popovers matching the 'Add New Journey' form implementation, allowing users to select new start and end dates",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "The edit modal shows dates as read-only text fields",
          "Replace the read-only date displays with the same calendar popover"
        ]
      },
      "acceptanceCriteria": [
        "Journey edit modal includes calendar popovers for both start date and end date fields",
        "Date pickers use the same Calendar component and Popover pattern as the Add New Journey form",
        "Selected dates update the journey's date range when saved"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Add time selection controls to the journey edit modal for both start time and end time, using the same Select components with hour and minute dropdowns as the Add New Journey form",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "Start time: Not editable",
          "End time: Not editable",
          "add full date/time editing capability"
        ]
      },
      "acceptanceCriteria": [
        "Journey edit modal includes hour and minute Select dropdowns for start time",
        "Journey edit modal includes hour and minute Select dropdowns for end time",
        "Time controls match the styling and behavior of the Add New Journey form",
        "Selected times update the journey's time range when saved"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Implement validation in the journey edit modal to ensure all existing schedule items fall within the newly selected journey date range, displaying a clear error message if any schedule items would fall outside the updated period",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "Schedule item validation: All schedule items must fall within the journey period",
          "Validating all existing schedule items"
        ]
      },
      "acceptanceCriteria": [
        "Before saving, the system checks that all schedule items for the journey fall within the new start and end date/time range",
        "If any schedule items fall outside the new range, display a descriptive error message listing affected items",
        "User cannot save the journey edit if validation fails",
        "Validation accounts for both date and time components of schedule items"
      ]
    },
    {
      "id": "REQ-4",
      "text": "Update the backend updateJourney function call in the edit modal to include the modified startDate, endDate, and time fields, ensuring the revised journey period is persisted correctly",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "edit fails to revise the travel period",
          "Changes are saved to the backend"
        ]
      },
      "acceptanceCriteria": [
        "The edit modal mutation sends updated startDate and endDate values to the backend",
        "Start and end times are included in the backend update payload",
        "Backend successfully updates and persists the modified journey period",
        "Edited journey reflects new dates and times in all UI components (Travelogue, Globe, Map)"
      ]
    }
  ],
  "constraints": [
    "Do not modify the backend Journey type structure or main.mo",
    "Preserve the existing edit modal layout and styling patterns",
    "Reuse the exact Calendar and Select components from the Add New Journey form",
    "Do not change how schedule items are stored or managed"
  ],
  "nonGoals": [
    "Adding the journey title field to backend storage (deferred to separate request)",
    "Automatically adjusting schedule item times when journey period changes",
    "Providing bulk schedule item updates or migrations",
    "Changing the Add New Journey form behavior or layout"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}